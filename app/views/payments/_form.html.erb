<%= simple_form_for([@quote, :invoice, @payment]) do |f| %>
  <%= f.error_notification %>

    <%= f.input :amount, :wrapper => :append do %>
      <%= f.input_field :amount, :class => "span1 input-append" %>
      <%= content_tag :span, '$', :class => "add-on" %>
    <% end %>

    <%= f.input :date do %>
      <%= text_field_tag '', @payment.try(:date).try(:strftime, t('date.formats.default')), class: "datepicker" %>
      <%= f.input_field :date, as: :hidden, :class => "datepicker-alt" %>
    <% end %>
    
    <%= f.input :payment_method, :as => :radio_buttons, :collection => payment_method_options, :item_wrapper_class => "inline", :wrapper_html => {:id => "payment_methods"} %>
    <%= f.input :credit_card_type, :collection => credit_card_type_options, :include_blank => true, :wrapper_html => {:id => "credit_card_type", :style => "display: #{@payment.payment_method == 'credit' ? 'block' : 'none'};"}  %>
    <%= f.input :transaction_number, label: t('transaction_number'), :wrapper_html => {:id => "transaction_number", :style => "display: #{['credit', 'debit'].include?(@payment.payment_method) ? 'block' : 'none'};"} %>

  <div class="form-actions">
    <%= submit_or_cancel(f) %>
  </div>
<% end %>

<script type="text/javascript" charset="utf-8">
  $('#payment_methods input:radio').live('click', function() {
    if (($(this).val() == "credit") || ($(this).val() == "debit")) {
      $('#transaction_number').show();
    } else {
      $('#transaction_number').hide();
      $('#transaction_number input').val('');
    }
    if ($(this).val() == "credit") {
      $('#credit_card_type').show();
    } else {
      $('#credit_card_type').hide();
      $('#credit_card_type select').val('');
    }
  });
</script>